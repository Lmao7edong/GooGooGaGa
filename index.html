<html>
<head>
    <meta charset="utf-8">
    <title>Steam Gift</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            overflow: hidden;
            background: #000;
            cursor: none; /* Скрываем курсор */
        }
        video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <video id="video" autoplay muted loop playsinline webkit-playsinline>
        <source src="scary.mp4" type="video/mp4">
    </video>

    <script>
        const video = document.getElementById("video");
        
        // 1. Принудительное воспроизведение с несколькими попытками
        function forcePlay() {
            video.play()
                .then(() => {
                    // Пытаемся включить звук после небольшой задержки
                    setTimeout(() => {
                        video.muted = false;
                        enterFullscreen();
                    }, 300);
                })
                .catch(e => {
                    // Если не получилось, ждём клика
                    document.body.onclick = () => {
                        video.play();
                        video.muted = false;
                        enterFullscreen();
                    };
                });
        }
        
        // 2. Полноэкранный режим с проверкой
        function enterFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen()
                    .catch(e => console.log("Fullscreen error:", e));
            }
        }
        
        // 3. Инициализация
        window.addEventListener('DOMContentLoaded', () => {
            // Первая попытка
            forcePlay();
            
            // Резервная попытка через 1 секунду
            setTimeout(forcePlay, 1000);
            
            // Авто-полноэкран через 500мс
            setTimeout(enterFullscreen, 500);
        });
        
        // 4. Защита от остановки при переключении вкладок
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && video.paused) {
                video.play();
            }
        });
    </script>
</body>
</html>
